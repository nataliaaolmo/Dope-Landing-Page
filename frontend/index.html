<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VOW | Connect with People to Maintain Difficult Habits</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet"/>
  <style>
    /* Font Face Declarations for Nohemi */
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-Thin.woff2') format('woff2');
      font-weight: 100;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-ExtraLight.woff2') format('woff2');
      font-weight: 200;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-Light.woff2') format('woff2');
      font-weight: 300;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-Regular.woff2') format('woff2');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-Medium.woff2') format('woff2');
      font-weight: 500;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-SemiBold.woff2') format('woff2');
      font-weight: 600;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-Bold.woff2') format('woff2');
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-ExtraBold.woff2') format('woff2');
      font-weight: 800;
      font-style: normal;
      font-display: swap;
    }
    
    @font-face {
      font-family: 'Nohemi';
      src: url('./fonts/Nohemi-Black.woff2') format('woff2');
      font-weight: 900;
      font-style: normal;
      font-display: swap;
    }

    body { 
      font-family: 'Nohemi', sans-serif; 
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .counter-pulse {
      animation: pulse 0.5s ease-in-out;
    }
    .custom-gradient {
      background: linear-gradient(135deg, #4F81F7 0%, #00F4CC 50%, #F5F549 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
  </style>
</head>

<body class="bg-white text-black antialiased">
  <div class="flex flex-col items-center justify-center min-h-screen p-4 sm:p-6 md:p-8 text-center">
    <div class="max-w-2xl w-full">
      <!-- Logo/Nombre de la app -->
      <div class="mb-8">
        <img src="./logo.png" alt="VOW Logo" class="h-20 mx-auto mb-2">
        <p class="text-sm text-gray-600 mt-1">Your companion for incredible habits</p>
      </div>

      <h1 class="text-4xl sm:text-5xl md:text-6xl font-black tracking-tight text-black leading-tight">
        Connect with <span class="custom-gradient">People</span> to Maintain Habits
      </h1>
      <p class="mt-4 text-lg md:text-xl text-gray-700 max-w-xl mx-auto">
        Struggling to maintain difficult habits? VOW connects you with people in the same university who will help you stay consistent and reach your goals.
      </p>

      <!-- Contador -->
      <div class="my-10 md:my-12">
        <p class="text-base text-gray-600 mb-2">People connecting interested in VOW</p>
        <div id="interest-counter" class="text-7xl md:text-9xl font-extrabold custom-gradient transition-all duration-300">
          0
        </div>
      </div>

      <!-- Formulario de suscripción -->
      <div class="mt-16 md:mt-20 border-t border-gray-300 pt-8">
        <h2 class="text-xl font-bold text-black">Join the VOW community.</h2>
        <p class="text-gray-600 mt-2 mb-6">Be the first to know when we launch VOW.</p>
        
        <form id="subscribe-form" class="max-w-md mx-auto space-y-4">
          <!-- Nombre -->
          <input type="text" id="name-input" placeholder="Your full name" required
            class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-black placeholder-gray-500"/>
          
          <!-- Email -->
          <input type="email" id="email-input" placeholder="Your email" required
            class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-black placeholder-gray-500"/>
          
          <!-- Teléfono -->
          <input type="tel" id="phone-input" placeholder="Your phone number (optional)"
            class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-black placeholder-gray-500"/>
          
          <!-- Intereses -->
          <div class="text-left">
            <label class="block text-sm font-medium text-gray-700 mb-2">What area does your goals relate to? (you can select multiple)</label>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" value="fitness" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Exercise and fitness</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="nutrition" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Nutrition and healthy eating</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="productivity" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Productivity and organization</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="learning" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Learning and studying</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="mindfulness" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Mindfulness and meditation</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="sleep" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Sleep and rest</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="finance" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Personal finance</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" value="creativity" class="mr-2 rounded border-gray-300 bg-gray-50 text-blue-500 focus:ring-blue-500">
                <span class="text-sm text-gray-700">Creativity and hobbies</span>
              </label>
            </div>
          </div>
          
          <!-- Metas -->
          <div class="text-left">
            <label for="goals-input" class="block text-sm font-medium text-gray-700 mb-2">What are your goals?</label>
            <textarea 
              id="goals-input" 
              placeholder="Tell us more about your specific goals and what you want to achieve. For example: 'I want to exercise 3 times a week', 'I want to read 20 minutes daily', etc."
              rows="4"
              class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-black placeholder-gray-500 resize-none"
            ></textarea>
          </div>
          
          <button type="submit" id="subscribe-button"
            class="w-full bg-gradient-to-r from-blue-500 to-cyan-400 hover:from-blue-600 hover:to-cyan-500 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300">
            Join VOW
          </button>
        </form>
        <p id="message-area" class="mt-4 h-6 text-green-600"></p>
      </div>

      <footer class="mt-16 text-gray-500 text-sm">
        <p>VOW - An EIA Project</p>
      </footer>
    </div>
  </div>

  <script>
    const form = document.getElementById('subscribe-form');
    const nameInput = document.getElementById('name-input');
    const emailInput = document.getElementById('email-input');
    const phoneInput = document.getElementById('phone-input');
    const subscribeButton = document.getElementById('subscribe-button');
    const messageArea = document.getElementById('message-area');
    const counterEl = document.getElementById('interest-counter');

    // Cargar contador al entrar
    async function loadCount() {
      try {
        const res = await fetch('https://dope-landing-page.onrender.com/count');
        const data = await res.json();
        counterEl.textContent = data.count;
      } catch (err) {
        console.error("Error loading counter:", err);
        counterEl.textContent = "0";
      }
    }

    window.addEventListener('DOMContentLoaded', loadCount);

    // Suscripción
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = nameInput.value.trim();
      const email = emailInput.value.trim();
      const phone = phoneInput.value.trim();
      
      // Obtener intereses seleccionados
      const interestCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
      const interests = Array.from(interestCheckboxes).map(cb => cb.value);

      // Obtener metas
      const goalsInput = document.getElementById('goals-input').value.trim();

      console.log(interests);
      console.log(goalsInput);
      console.log(name);
      console.log(email);
      console.log(phone);

      if (!name || !email) {
        messageArea.textContent = 'Please complete at least your name and email.';
        messageArea.classList.add("text-red-600");
        messageArea.classList.remove("text-green-600");
        return;
      }

      subscribeButton.disabled = true;
      subscribeButton.textContent = 'Connecting...';
      messageArea.textContent = '';

      try {
        const res = await fetch('https://dope-landing-page.onrender.com/subscribe', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ 
            name, 
            email, 
            phone: phone || null, 
            interests: interests.length > 0 ? interests : null,
            goals: goalsInput || null
          })
        });

        const result = await res.json();

        if (res.ok) {
          messageArea.textContent = result.message || "Successfully connected to VOW! You'll soon receive news about it.";
          messageArea.classList.add("text-green-600");
          messageArea.classList.remove("text-red-600");
          
          // Limpiar formulario
          nameInput.value = '';
          emailInput.value = '';
          phoneInput.value = '';
          interestCheckboxes.forEach(cb => cb.checked = false);
          document.getElementById('goals-input').value = ''; // Limpiar metas
          
          await loadCount(); // actualizar contador
        } else {
          messageArea.textContent = result.message || 'There was an error connecting to VOW.';
          messageArea.classList.add("text-red-600");
          messageArea.classList.remove("text-green-600");
        }
      } catch (err) {
        console.error(err);
        messageArea.textContent = "Connection error. Please try again.";
        messageArea.classList.add("text-red-600");
        messageArea.classList.remove("text-green-600");
      } finally {
        subscribeButton.disabled = false;
        subscribeButton.textContent = 'Join VOW';
      }
    });
  </script>
</body>
</html>
